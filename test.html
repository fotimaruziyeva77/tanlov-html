<!doctype html>
<html lang="uz" class="scroll-smooth">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Quiz/Test Page — HTML + Tailwind</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<script>
		tailwind.config = {
			theme: {
				extend: {
					colors: {
						brand: {
							50: '#eef2ff',
							100: '#e0e7ff',
							500: '#6366f1',
							600: '#5458ea',
							700: '#4f46e5',
						}
					}
				}
			}
		}
	</script>
</head>

<body class="min-h-screen bg-slate-50 text-slate-800">
	<!-- Header -->
	<header class="sticky top-0 z-10 bg-white border-b border-slate-200">
		<div class="max-w-5xl mx-auto px-4 py-3 flex items-center gap-3 justify-between">
			<div class="flex items-center gap-2">
				<div class="h-8 w-8 rounded-xl bg-brand-600 text-white grid place-content-center font-bold">Q</div>
				<h1 class="text-lg sm:text-xl font-semibold">Test/Quiz sahifasi</h1>
			</div>
		</div>
	</header>

	<main class="max-w-5xl mx-auto px-4 py-6 grid lg:grid-cols-3 gap-6">
		<!-- Left Column: Quiz -->
		<section class="lg:col-span-2">
			<div class="mb-4">
				<div class="flex items-center justify-between text-sm mb-1">
					<span id="progressText" class="font-medium">Savol 1 / 5</span>
					<div class="flex items-center gap-3">
						<span id="timer" class="tabular-nums">00:00</span>
					</div>
				</div>
				<div class="w-full h-2 bg-slate-200 rounded-full overflow-hidden">
					<div id="progressBar" class="h-full w-0 bg-brand-600 transition-all"></div>
				</div>
			</div>

			<div class="bg-white border border-slate-200 rounded-2xl shadow-sm">
				<div class="p-4 sm:p-6">
					<div class="flex items-start justify-between gap-4">
						<h2 id="questionText" class="text-base sm:text-lg font-semibold leading-relaxed">Savol matni...</h2>
						<span id="qBadge"
							class="shrink-0 inline-flex items-center justify-center rounded-full text-xs px-2 py-1 bg-slate-100">1</span>
					</div>

					<div id="options" class="mt-4 grid gap-2"></div>

					<div id="explanation" class="hidden mt-4 text-sm rounded-xl border border-slate-200 bg-slate-50 p-3"></div>

					<div class="mt-6 flex items-center justify-between gap-3">
						<button id="prevBtn"
							class="px-4 py-2 rounded-xl border border-slate-300 hover:bg-slate-100 disabled:opacity-40 disabled:pointer-events-none">Oldingi</button>
						<div class="flex items-center gap-3">
							<button id="skipBtn" class="px-4 py-2 rounded-xl border border-slate-300 hover:bg-slate-100">O'tkazib
								yuborish</button>
							<button id="nextBtn"
								class="px-4 py-2 rounded-xl bg-brand-600 text-white hover:bg-brand-700 disabled:opacity-40 disabled:pointer-events-none">Keyingi</button>
							<button id="submitBtn"
								class="hidden px-4 py-2 rounded-xl bg-emerald-600 text-white hover:bg-emerald-700">Yakunlash</button>
						</div>
					</div>
					<p class="mt-2 text-xs text-slate-500">Tezkor tanlash: klaviaturada 1–4 raqamlari.</p>
				</div>
			</div>
		</section>

		<!-- Right Column: Summary / Meta -->
		<aside class="space-y-4">
			<div class="bg-white border border-slate-200 rounded-2xl p-4 sm:p-5">
				<h3 class="font-semibold mb-3">Ma'lumot</h3>
				<ul class="text-sm space-y-2">
					<li class="flex items-center justify-between"><span>To'g'ri javoblar:</span> <span id="scoreMini"
							class="font-semibold">0</span></li>
					<li class="flex items-center justify-between"><span>Qolgan savollar:</span> <span id="leftMini"
							class="font-semibold">0</span></li>
					<li class="flex items-center justify-between"><span>Holat:</span> <span id="stateMini"
							class="font-medium">Boshlanmadi</span></li>
				</ul>
			</div>

			<div class="bg-white border border-slate-200 rounded-2xl p-4 sm:p-5">
				<h3 class="font-semibold mb-3">Savollar ro'yxati</h3>
				<div id="questionMap" class="grid grid-cols-8 gap-2"></div>
			</div>
		</aside>
	</main>

	<footer class="max-w-5xl mx-auto px-4 py-8 text-center text-xs text-slate-500">
		© <span id="year"></span> Quiz sahifasi. HTML + Tailwind + Vanilla JS.
	</footer>

	<script>
		const questions = [
			{
				text: "HTMLda eng katta sarlavha tegi qaysi?",
				options: ["<h6>", "<h1>", "<title>", "<header>"],
				correctIndex: 1,
				explanation: "<h1> — eng katta sarlavha, <h6> — eng kichik."
			},
			{
				text: "Tailwind CSS nima?",
				options: [
					"JavaScript framework",
					"Utility-first CSS kutubxonasi",
					"Backend til",
					"Ma'lumotlar bazasi"
				],
				correctIndex: 1,
				explanation: "Tailwind — utility-first uslubidagi CSS framework."
			},
			{
				text: "HTML nima uchun ishlatiladi?",
				options: [
					"Ma'lumotlarni saqlash",
					"Veb sahifalarni tuzish",
					"Dastur yozish",
					"Serverni boshqarish"
				],
				correctIndex: 1,
				explanation: "HTML — veb sahifalarni tuzish uchun ishlatiladi."
			},
			{
				text: "CSS nimani anglatadi?",
				options: [
					"Computer Style Sheets",
					"Cascading Style Sheets",
					"Creative Style System",
					"Colorful Style Syntax"
				],
				correctIndex: 1,
				explanation: "CSS — Cascading Style Sheets degani."
			},
			{
				text: "JavaScript qayerda ishlaydi?",
				options: ["Brauzerda", "Server xonasida", "Faqat mobil qurilmada", "SQL bazada"],
				correctIndex: 0,
				explanation: "JavaScript asosan brauzerda ishlaydi."
			}
		]


		let current = 0
		let selected = Array(questions.length).fill(null)
		let correctCount = 0
		let startedAt = null
		let timerInterval = null

		const questionText = document.getElementById('questionText')
		const optionsEl = document.getElementById('options')
		const progressText = document.getElementById('progressText')
		const progressBar = document.getElementById('progressBar')
		const qBadge = document.getElementById('qBadge')
		const explanation = document.getElementById('explanation')

		const prevBtn = document.getElementById('prevBtn')
		const nextBtn = document.getElementById('nextBtn')
		const skipBtn = document.getElementById('skipBtn')
		const submitBtn = document.getElementById('submitBtn')

		const scoreMini = document.getElementById('scoreMini')
		const leftMini = document.getElementById('leftMini')
		const stateMini = document.getElementById('stateMini')
		const questionMap = document.getElementById('questionMap')

		function startTimer() {
			startedAt = Date.now()
			const timerEl = document.getElementById('timer')
			clearInterval(timerInterval)
			timerInterval = setInterval(() => {
				const diff = Date.now() - startedAt
				const s = Math.floor(diff / 1000)
				const m = Math.floor(s / 60).toString().padStart(2, '0')
				const ss = (s % 60).toString().padStart(2, '0')
				timerEl.textContent = `${m}:${ss}`
			}, 250)
		}

		function renderMap() {
			questionMap.innerHTML = ''
			questions.forEach((_, i) => {
				const btn = document.createElement('button')
				btn.className = `h-8 w-8 rounded-lg border text-xs grid place-content-center ${i === current ? 'border-brand-600 bg-brand-100' : 'border-slate-300'} ${selected[i] !== null ? 'ring-1 ring-emerald-500/60' : ''}`
				btn.textContent = i + 1
				btn.addEventListener('click', () => { current = i; render() })
				questionMap.appendChild(btn)
			})
		}

		function render() {
			const total = questions.length
			const q = questions[current]

			progressText.textContent = `Savol ${current + 1} / ${total}`
			qBadge.textContent = current + 1
			progressBar.style.width = `${((current) / (total - 1)) * 100}%`

			questionText.textContent = q.text
			optionsEl.innerHTML = ''

			q.options.forEach((opt, idx) => {
				const isSelected = selected[current] === idx
				const btn = document.createElement('button')
				btn.className = `text-left w-full rounded-xl border bg-white border-slate-200 px-4 py-3 hover:bg-slate-50 ${isSelected ? 'ring-2 ring-brand-600' : ''}`
				btn.innerHTML = `<span class="font-medium mr-2">${String.fromCharCode(65 + idx)}.</span> ${opt}`
				btn.addEventListener('click', () => selectOption(idx))
				optionsEl.appendChild(btn)
			})

			const chosen = selected[current]
			if (chosen !== null) {
				explanation.classList.remove('hidden')
				explanation.innerHTML = `<div class="font-medium mb-1">Izoh:</div>${questions[current].explanation}`
			} else {
				explanation.classList.add('hidden')
				explanation.textContent = ''
			}

			prevBtn.disabled = current === 0
			nextBtn.disabled = current === total - 1
			submitBtn.classList.toggle('hidden', !selected.every(v => v !== null))

			correctCount = selected.reduce((acc, v, i) => acc + (v === questions[i].correctIndex ? 1 : 0), 0)
			scoreMini.textContent = `${correctCount} / ${total}`
			leftMini.textContent = selected.filter(v => v === null).length
			stateMini.textContent = selected.every(v => v !== null) ? 'Tayyor' : 'Jarayonda'

			renderMap()
		}

		function selectOption(idx) {
			if (!startedAt) startTimer()
			selected[current] = idx
			const all = Array.from(optionsEl.children)
			all.forEach((btn, i) => {
				btn.classList.remove('ring-2', 'ring-brand-600')
				if (i === questions[current].correctIndex) {
					btn.classList.add('border-emerald-500', 'bg-emerald-50')
				} else if (i === idx) {
					btn.classList.add('border-rose-500', 'bg-rose-50')
				}
			})

			explanation.classList.remove('hidden')
			explanation.innerHTML = `<div class="font-medium mb-1">Izoh:</div>${questions[current].explanation}`

			setTimeout(() => {
				if (current < questions.length - 1) {
					current++
					render()
				} else {
					submitBtn.classList.remove('hidden')
					submitBtn.focus()
				}
			}, 500)
		}

		prevBtn.addEventListener('click', () => { if (current > 0) { current--; render() } })
		nextBtn.addEventListener('click', () => { if (current < questions.length - 1) { current++; render() } })
		skipBtn.addEventListener('click', () => { if (current < questions.length - 1) { current++; render() } })

		submitBtn.addEventListener('click', () => {
			clearInterval(timerInterval)
			stateMini.textContent = 'Yakunlandi'

			// Savollarni yashirish
			const quizSection = document.querySelector('main section')
			quizSection.innerHTML = `
    <div class="bg-white border border-slate-200 rounded-2xl shadow-sm p-6 text-center">
      <h2 class="text-2xl font-bold mb-4">Natijangiz</h2>
      <p class="text-lg mb-2">Siz <span class="font-semibold">${correctCount}</span> ta to‘g‘ri javob berdingiz.</p>
      <p class="text-slate-600">Jami savollar soni: <span class="font-semibold">${questions.length}</span></p>
      <p class="mt-3 text-sm text-slate-500">Vaqt: ${document.getElementById('timer').textContent}</p>
    </div>
  `
		})


		window.addEventListener('keydown', (e) => {
			const n = parseInt(e.key, 10)
			if (n >= 1 && n <= 4) {
				const idx = n - 1
				if (idx < questions[current].options.length) selectOption(idx)
			}
			if (e.key === 'ArrowRight') nextBtn.click()
			if (e.key === 'ArrowLeft') prevBtn.click()
		})

		document.getElementById('year').textContent = new Date().getFullYear()
		render();
	</script>
</body>

</html>